<div class="row margin-bottom">
  <div class="small-12 column relative">

    <h1 class="float-left"><%= t("notifications.index.title") %></h1>

    <% if @notifications.empty? %>
      <div data-alert class="callout primary margin-top clear">
        <%= t("notifications.index.empty_notifications") %>
      </div>
    <% else %>
      <div class="float-right margin-top">
        <%= link_to t("notifications.index.mark_all_as_read"),
                    mark_all_as_read_notifications_path, method: :put %>
      </div>

      <ul class="no-bullet clear notifications-list">
        <% @notifications.each do |notification| %>
          <% if notification.try(:notifiable_available?) %>
            <% locals = { notification: notification,
                          link: notification.link,
                          title: notification.notifiable_title,
                          body: notification.notifiable.try(:body),
                          timestamp: notification.timestamp } %>
          <% end %>
          <%= render partial: '/notifications/notification', locals: locals || {} %>
        <% end %>
      </ul>
    <% end %>
  </div>
</div>
