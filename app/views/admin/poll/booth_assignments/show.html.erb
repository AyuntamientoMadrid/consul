<%= link_to admin_poll_path(@poll, anchor: 'tab-booths') do %>
  <span class="icon-angle-left"></span>
  <%= @poll.name %>
<% end %>

<h2><%= @booth_assignment.booth.name %></h2>

<% if @booth_assignment.booth.location.present? %>
  <p>
    <strong><%= t("admin.poll_booth_assignments.show.location") %></strong>:
    <%= @booth_assignment.booth.location %>
  </p>
<% end %>

<div class="tabs-content" data-tabs-content="booths-tabs">
  <ul class="tabs" data-tabs id="booths-tabs">
    <li class="tabs-title is-active">
      <%= link_to t("admin.poll_booth_assignments.show.officers"), "#tab-officers" %>
    </li>
    <li class="tabs-title">
      <%= link_to t("admin.poll_booth_assignments.show.recounts"), "#tab-recounts" %>
    </li>
  </ul>

  <div class="tabs-panel is-active" id="tab-officers">
    <% if @booth_assignment.officers.empty? %>
      <div class="callout primary margin-top">
        <%= t("admin.poll_booth_assignments.show.no_officers") %>
      </div>
    <% else %>
      <h3><%= t("admin.poll_booth_assignments.show.officers_list") %></h3>

      <table id="officers_list">
        <tbody>
          <% @booth_assignment.officers.uniq.each do |officer| %>
            <tr id="officer_<%= officer.id %>" class="officer">
              <td><%= link_to officer.name, admin_officer_assignments_path(officer: officer, poll: @poll) %></td>
              <td><%= officer.email %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% end %>
  </div>

  <div class="tabs-panel" id="tab-recounts">
    <% if @booth_assignment.recounts.empty? %>
      <div class="callout primary margin-top">
        <%= t("admin.poll_booth_assignments.show.no_recounts") %>
      </div>
    <% else %>
      <h3><%= t("admin.poll_booth_assignments.show.recounts_list") %></h3>
      <table id="recounts_list">
        <thead>
          <tr>
            <th><%= t("admin.poll_booth_assignments.show.date") %></th>
            <th class="text-center"><%= t("admin.poll_booth_assignments.show.count_by_officer") %></th>
            <th class="text-center"><%= t("admin.poll_booth_assignments.show.count_by_system") %></th>
          </tr>
        </thead>
        <tbody>
          <% @booth_assignment.recounts.sort_by{|r| r.date}.each do |recount| %>
            <tr id="recount_<%= recount.id %>" class="<%= 'count-error' if recount.count != 0 %>">
              <td><%= l recount.date.to_date %></td>
              <td class="text-center" title="<%= recount.officer_assignment.officer.name %>"><%= recount.count %></td>
              <td class="text-center">0</td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% end %>
  </div>
</div>
